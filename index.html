<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>てすごろくゲーム</title>
  <style>
    :root {
      font-family: "Noto Sans JP", system-ui, sans-serif;
      background-color: #1d1a2e;
      color: #f7f5ff;
    }
    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at 20% 20%, #3b2f8d, #1d1a2e 60%);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 1.5rem;
    }
    .game-shell {
      width: min(960px, 100%);
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 2rem;
      padding: 2.5rem;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
    }
    header {
      text-align: center;
      margin-bottom: 2rem;
    }
    header h1 {
      font-size: clamp(2.25rem, 4vw, 3rem);
      margin-bottom: 0.25rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }
    header p {
      margin: 0;
      color: #b0b6ff;
      font-size: 1rem;
      letter-spacing: 0.08em;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 0.75rem;
      margin-bottom: 1.75rem;
    }
    .space {
      padding: 1rem;
      border-radius: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.01));
      min-height: 110px;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.3s ease;
    }
    .space.active {
      transform: translateY(-6px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
    }
    .space span {
      font-size: 0.85rem;
      color: #a8bfff;
    }
    .space strong {
      font-size: 1.1rem;
      margin-top: 0.65rem;
    }
    .controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
    }
    button {
      border: none;
      background: linear-gradient(135deg, #ffd25f, #ff7a18);
      color: #2b1f0f;
      font-size: 1.1rem;
      padding: 0.85rem 1.5rem;
      border-radius: 999px;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    button:active {
      transform: translateY(1px);
    }
    .dice-display {
      font-size: 1.4rem;
      letter-spacing: 0.12em;
      color: #ffeaa7;
    }
    .messages {
      margin-top: 1.25rem;
      padding: 1.25rem;
      border-radius: 1.25rem;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.15);
      min-height: 80px;
    }
    .messages p {
      margin: 0;
      line-height: 1.6;
    }
    .finish {
      color: #7ef9ff;
      font-weight: 700;
    }
  </style>
</head>
<body>
  <div class="game-shell">
    <header>
      <h1>ちょこっとてすごろく</h1>
      <p>サイコロを振って8マスのゴールを目指そう！</p>
    </header>
    <div class="board" id="board"></div>
    <div class="controls">
      <button id="roll">サイコロを振る</button>
      <div class="dice-display" id="dice">--</div>
      <div id="turn-info">ターン: 0</div>
    </div>
    <div class="messages" id="messages">
      <p>準備完了！「サイコロを振る」でスタート。</p>
    </div>
  </div>
  <script>
    const spaces = [
      { name: "スタート", effect: "最初の一歩。ゆっくり行こう。" },
      { name: "カフェ", effect: "コーヒーで1ターン休憩。次のターンに2倍進む。" },
      { name: "アトリエ", effect: "創作意欲アップ！次のサイコロの目+1。" },
      { name: "川の橋", effect: "渡るのに少し時間がかかる。次のターン-1移動。" },
      { name: "森の小径", effect: "動物たちが応援。1マス追加で移動。" },
      { name: "謎の遺跡", effect: "宝箱発見。もう一度チャンス。" },
      { name: "風の丘", effect: "風に乗って次のターン+2進む。" },
      { name: "ゴール", effect: "おめでとう！ゴール到達！" },
    ];

    const boardEl = document.getElementById("board");
    const diceEl = document.getElementById("dice");
    const messagesEl = document.getElementById("messages");
    const rollBtn = document.getElementById("roll");
    const turnInfo = document.getElementById("turn-info");

    let position = 0;
    let turn = 0;

    function renderBoard() {
      boardEl.innerHTML = "";
      spaces.forEach((space, index) => {
        const spaceEl = document.createElement("div");
        spaceEl.className = `space${index === position ? " active" : ""}`;
        spaceEl.innerHTML = `
          <span>マス ${index + 1}</span>
          <strong>${space.name}</strong>
          <p>${space.effect}</p>
        `;
        boardEl.appendChild(spaceEl);
      });
    }

    function logMessage(text, highlight = false) {
      messagesEl.innerHTML = `<p class="${highlight ? "finish" : ""}">${text}</p>`;
    }

    function updateTurn() {
      turnInfo.textContent = `ターン: ${turn}`;
    }

    function rollDice() {
      if (position >= spaces.length - 1) {
        logMessage("すでにゴールしています！ リロードして再挑戦。");
        return;
      }

      const raw = Math.ceil(Math.random() * 6);
      diceEl.textContent = raw;
      turn += 1;

      let move = raw;
      // special board effects before moving
      if (position === 1) move += 1;
      if (position === 3) move = Math.max(1, move - 1);

      position = Math.min(spaces.length - 1, position + move);
      renderBoard();

      const current = spaces[position];
      const highlight = position === spaces.length - 1;
      logMessage(`"${current.name}"に到着！ ${current.effect}`, highlight);
      updateTurn();

      if (highlight) {
        rollBtn.textContent = "ゴール済み";
        rollBtn.disabled = true;
      }
    }

    rollBtn.addEventListener("click", rollDice);

    renderBoard();
    updateTurn();
  </script>
</body>
</html>
